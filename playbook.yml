#!/usr/bin/env ansible-playbook

- name: Gather prerequisites
  hosts: all
  gather_facts: True
  tasks:
    - group_by: key={{ ansible_distribution }}

- name: Initial Setup
  hosts: localhost
  become: True
  tasks:

    - name: Requirements
      apt:
        name: build-essential
        state: present
      apt:
        name: nano
        state: present
      apt:
        name: redshift-gtk
        state: present
      apt:
        name: plank
        state: present
      apt:
        name: curl
        state: present
      apt:
        name: python-pip
        state: present
      when: ansible_os_family == "Debian"

    - name: Requirements (ext)
      pip:
        name: pylint
      pip:
        name: httpie
      pip:
        name: aws-cli
      pip:
        name: docker
        version: 2.4.5
      pip:
        name: docker-compose
      when: ansible_os_family == "Debian"

    - name: Asesthetics
      script: scripts/aesthetics.sh
      when: ansible_os_family == "Debian"

    - name: Node.js
      script: scripts/node.sh
      when: ansible_os_family == "Debian"

    - name: Skype
      script: scripts/skype.sh
      when: ansible_os_family == "Debian"

    - name: Hipchat
      script: scripts/hipchat.sh
      when: ansible_os_family == "Debian"

    - name: VSCode
      script: scripts/vscode.sh
      when: ansible_os_family == "Debian"

    - name: VSCode (Extensions)
      script: scripts/vscode.extensions.sh
      become: false
      when: ansible_os_family == "Debian"
